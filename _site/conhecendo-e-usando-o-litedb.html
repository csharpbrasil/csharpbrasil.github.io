<!DOCTYPE html>
<html>

<head>
	<!-- Meta -->
	<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="C# Brasil">

	<title>Conhecendo e usando o LiteDb</title>

	<!-- CSS & fonts -->
	<link rel="stylesheet" href="/css/main.css?1716937206294534819">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,600,800" rel="stylesheet" type="text/css">

    <link rel="shortcut icon" href="/images/favicon.png" />
</head>


<body>
	<div id="wrap">
	  	
    <!-- Navigation -->
    <nav id="nav">
	<div id="nav-list">
		<a href="http://localhost:4000/">Página inicial</a>
		<a href="http://localhost:4000/sobre">Sobre o blog</a>
	</div>
</nav>

    
    <!-- Icon menu -->
	  <a id="nav-menu">
	  	<div id="menu"></div>
	  </a>
    <!-- Header -->
    <header id="header">
	<a href="http://localhost:4000/">
		<img src="/images/logo_csharpbrasil.png" class="logo" alt="C# Brasil">
	</a>
</header>

    <!-- Main content -->
	  <div id="container">
      <main>
        <article id="post-page">
	<h2>Conhecendo e usando o LiteDb</h2>		
	<time datetime="2017-05-12T08:30:23-03:00" class="by-line">
		
		12
		Maio
		  
		2017
	</time>
	<div class="content">

		<p>O LiteDb é um banco de dados NoSql desenvolvido e mantido pelo Mauricio David. Você pode conhecer mais sobre acessando a <a href="http://www.litedb.org/">página do projeto</a>. Mas o que o LiteDb tem de diferença que os outros banco de dados NoSql não tem?</p>

<ul>
  <li>Não necessita de um servidor de documentos NoSql</li>
  <li>Possui uma API simples muito semelhante ao do MongoDb</li>
  <li>Pequena biblioteca desenvolvida 100% em código C# NET 3.5 / NETStandard 1.4</li>
  <li>Suporte para Portable UWP/PCL</li>
  <li>Recuperação de dados após falha de gravação</li>
  <li>Criptografia de arquivo de dados usando criptografia DES (AES)</li>
  <li>Transações ACID (atomicidade, consistência, isolamento e durabilidade)</li>
  <li>Recuperação de dados após falha de gravação (journal mode)</li>
  <li>Mapeie suas classes POCO para o BsonDocument usando atributos ou usando Fluent Mapper API</li>
  <li>Armazenar arquivos e dados de fluxo (como GridFS no MongoDB)</li>
  <li>Armazenamento de arquivos de dados simples (como SQLite)</li>
  <li>Indexação de campos dos documentos para pesquisa rápida (até 16 índices por coleção)</li>
  <li>Suporte a consultas LINQ</li>
  <li>Shell de comando</li>
  <li>Código-fonte aberto e gratuito, inclusive para uso comercial</li>
  <li>Pode ser instalado via NuGet</li>
</ul>

<p>Para demonstrar o uso do LiteDb, vamos criar uma aplicação de cadastro simples, realizando as operações básicas como Consulta, Inclusão, Exclusão e Atualização. Iniciaremos criando um novo projeto, pra isso utilizarei o Visual Studio Community 2015. Abra-o e crie um novo projeto usando o template Windows Form Application. <img src="https://raphaelcardoso.com.br/wp-content/uploads/2017/04/criando_usando_litedb_001-1.png" alt="Criando um novo projeto" /> No Form1 desse novo projeto adicionaremos 4 Button e 1 DataGridView. <img src="https://raphaelcardoso.com.br/wp-content/uploads/2017/04/criando_usando_litedb_002-1.png" alt="Formulário do projeto" /> Com o nosso form criado, vamos adicionar a referencia do LiteDb usando o NuGet Package Manager. Pesquise por LiteDb e adicione ao projeto. <img src="https://raphaelcardoso.com.br/wp-content/uploads/2017/04/criando_usando_litedb_003-1.png" alt="LiteDb - Nuget" /> Vamos agora criar o objeto necessário para o nosso projeto. Usaremos o objeto com o nome de Agenda e definiremos para ele qual a coluna é um Id e quais as colunas deverão ser indexadas. [code=’csharp’] using LiteDB; public class Agenda { [BsonId] public int Id { get; set; } [BsonIndex] public string Nome { get; set; } [BsonIndex] public string Email { get; set; } public string Telefone { get; set; } } [/code] Adicione um novo form e inclua nele 3 Label, 3 TextBox e 2 Button. <img src="https://raphaelcardoso.com.br/wp-content/uploads/2017/04/criando_usando_litedb_004-1.png" alt="Formulário do Projeto" /> Agora vamos implementar o código responsavel em gravar os dados. Dê um duplo clique no button1 do Form2, esse botão será responsavel por incluir os dados. [code=’csharp’] private void button1_Click(object sender, EventArgs e) { var agenda = new Agenda(); agenda.Nome = textBox1.Text; agenda.Email = textBox2.Text; agenda.Telefone = textBox3.Text; using (var db = new LiteDatabase(“Filename=criandoUsandoLiteDb.db”)) { db.GetCollection().Insert(agenda); } this.Close(); } [/code] Repare no código anterior que para salvar simplesmente criamos uma instancia do objeto agenda, atribuimos os valores para ele e salvamos. Para testar precisamos criar um evento no botão incluir do form1. [code=’csharp’] private void button2_Click(object sender, EventArgs e) { var form2 = new Form2(); form2.ShowDialog(); } [/code] Ao executar nosso projeto, já podemos incluir registro no LiteDb. <img src="https://raphaelcardoso.com.br/wp-content/uploads/2017/04/criando_usando_litedb_005-1.png" alt="Formulário do Projeto" /> E podemos confir se os dados estão lá usando o LiteDb Shell (falarei sobre ele mais para frente). <img src="https://raphaelcardoso.com.br/wp-content/uploads/2017/04/criando_usando_litedb_006-1.png" alt="LiteDb Shell" /> Agora em nosso form1 vamos implementar o botão que irá listar todos os dados no DataGridView. [code=’csharp’] private void button1_Click(object sender, EventArgs e) { using (var db = new LiteDatabase(“Filename=criandoUsandoLiteDb.db”)) { var agendas = db.GetCollection().FindAll().ToList(); dataGridView1.SelectionMode = DataGridViewSelectionMode.FullRowSelect; dataGridView1.DataSource = agendas; } } [/code] <img src="https://raphaelcardoso.com.br/wp-content/uploads/2017/04/criando_usando_litedb_007-1.png" alt="Formulário do Projeto" /> Para realizar a atualização, vamos criar um novo form, o form3 e adicionar 4 Label, 4 TextBox e 2 Button; <img src="https://raphaelcardoso.com.br/wp-content/uploads/2017/04/criando_usando_litedb_008-1.png" alt="Formulário do Projeto" /> Precisaremos também fazer uma pequena mudança no form3 para que ele receba o id do registro para ser consultado e posteriormente editado. Alteraremos o construtor para receber o Id e carregar os dados para o formulário. [code=’csharp’] protected readonly int Id; protected Agenda agenda; public Form3(int id) { this.Id = id; InitializeComponent(); CarregaDados(); } private void CarregaDados() { using (var db = new LiteDatabase(“Filename=criandoUsandoLiteDb.db”)) { agenda = db.GetCollection().FindById(this.Id); } textBox1.Text = agenda.Id.ToString(); textBox2.Text = agenda.Nome; textBox3.Text = agenda.Email; textBox4.Text = agenda.Telefone; } [/code] Agora criaremos o evento para salvar os dados. [code=’csharp’] private void button1_Click(object sender, EventArgs e) { agenda.Nome = textBox2.Text; agenda.Email = textBox3.Text; agenda.Telefone = textBox4.Text; using (var db = new LiteDatabase(“Filename=criandoUsandoLiteDb.db”)) { db.GetCollection().Update(agenda); } this.Close(); } [/code] Voltando ao form1, vamos definir o evento do botão atualizar. [code=’csharp’] private void button3_Click(object sender, EventArgs e) { int id; int.TryParse(dataGridView1.SelectedRows[0].Cells[0].Value.ToString(), out id); var form3 = new Form3(id); form3.ShowDialog(); } [/code] <img src="https://raphaelcardoso.com.br/wp-content/uploads/2017/04/criando_usando_litedb_009-1.png" alt="Formulário do Projeto" /> <img src="https://raphaelcardoso.com.br/wp-content/uploads/2017/04/criando_usando_litedb_010-1.png" alt="Formulário do Projeto" /> Para concluir, iremos definir a opção de excluir. Vamos definir o evento do button4. [code=’csharp’] private void button4_Click(object sender, EventArgs e) { int id; int.TryParse(dataGridView1.SelectedRows[0].Cells[0].Value.ToString(), out id); if (id &gt; 0) { var dialogResult = MessageBox.Show(“Deseja excluir o registro selecionado?”, “Excluir”, MessageBoxButtons.YesNo, MessageBoxIcon.Question, MessageBoxDefaultButton.Button2); if (dialogResult == DialogResult.Yes) { using (var db = new LiteDatabase(“Filename=criandoUsandoLiteDb.db”)) { db.GetCollection().Delete(id); } } } } [/code] <img src="https://raphaelcardoso.com.br/wp-content/uploads/2017/04/criando_usando_litedb_011-1.png" alt="Formulário do Projeto" /> <img src="https://raphaelcardoso.com.br/wp-content/uploads/2017/04/criando_usando_litedb_012-1.png" alt="Formulário do Projeto" /> Como pode perceber, em nenhum momento foi preciso abrir qualquer tipo de gerenciador de banco de dados, tão pouco executar comandos SQL. Porem é possível criar as consultas utilizando expressão Linq ou o próprio Helper do LiteDb. [code=’csharp’] db.GetCollection().Find(x =&gt; x.Nome.Contains(“Pedro”)).ToList(); db.GetCollection().Find(Query.Contains(“Nome”, “Pedro”)); [/code] Outro ponto interessante que pode perceber que somente definimos um nome para o banco de dados e ele foi criado junto com o nosso executável. É possível gerenciar o banco criado, basta utilizar o LiteDb Shell que você irá encontrar <a href="https://github.com/mbdavid/LiteDB/releases">aqui</a> e consultar seu uso <a href="https://github.com/mbdavid/LiteDB/wiki/Shell">aqui</a>. <img src="https://raphaelcardoso.com.br/wp-content/uploads/2017/04/criando_usando_litedb_013-1.png" alt="LiteDb Shell" /> Como pode perceber o LiteDb pode nos atender muito bem para pequenos e médios projetos, tanto para aplicações Windows, Web ou Mobile (esse ainda não vi funcionar mas a proposta parece muito boa). Não deixe de acompanhar o projeto no <a href="https://github.com/ferronicardoso/ConhecendoUsandoLiteDb">GitHub</a> e qualquer dúvida pode deixar seu comentário. Abraço e bom estudo!</p>

		
	</div>
</article>


      </main>		
      <!-- Pagination links -->
      
	  </div>
    
    <!-- Footer -->
    <footer class="footer"><span>&copy; 2024 C# Brasil. Todos os direitos reservados | Versão: 1.0.0 </span></footer>
    <!-- Script -->
    <script src="/js/main.js"></script>	

	</div>
</body>
</html>
