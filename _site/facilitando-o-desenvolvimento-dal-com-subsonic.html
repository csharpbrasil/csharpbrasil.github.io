<!DOCTYPE html>
<html>

<head>
	<!-- Meta -->
	<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="C# Brasil">

	<title>Facilitando o desenvolvimento DAL com SubSonic</title>

	<!-- CSS & fonts -->
	<link rel="stylesheet" href="/css/main.css?1716937206294534819">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,600,800" rel="stylesheet" type="text/css">

    <link rel="shortcut icon" href="/images/favicon.png" />
</head>


<body>
	<div id="wrap">
	  	
    <!-- Navigation -->
    <nav id="nav">
	<div id="nav-list">
		<a href="http://localhost:4000/">Página inicial</a>
		<a href="http://localhost:4000/sobre">Sobre o blog</a>
	</div>
</nav>

    
    <!-- Icon menu -->
	  <a id="nav-menu">
	  	<div id="menu"></div>
	  </a>
    <!-- Header -->
    <header id="header">
	<a href="http://localhost:4000/">
		<img src="/images/logo_csharpbrasil.png" class="logo" alt="C# Brasil">
	</a>
</header>

    <!-- Main content -->
	  <div id="container">
      <main>
        <article id="post-page">
	<h2>Facilitando o desenvolvimento DAL com SubSonic</h2>		
	<time datetime="2009-04-09T17:44:34-03:00" class="by-line">
		
		9
		Abril
		  
		2009
	</time>
	<div class="content">

		<p>O SubSonic é uma tecnologia open source que cria toda a camada de acesso a dados (DAL - Data Access Layer) de nosso projeto em .NET e que tem como líder Rob Conery.</p>

<p>Ele cria toda nossa camada de acesso a dados (DAL) em tempo de compilação, ficando somente em nossa responsabilidade utilizá-lo.</p>

<p>Atualmente ele suporta quase todos os bancos de dados do mercado como:</p>

<ul>
  <li>SQL Server 2000 or 2005</li>
  <li>MySQL</li>
  <li>Oracle</li>
</ul>

<p>Para utiliza-lo em nossos projetos, basta acessar o link e fazer o download:</p>

<ul>
  <li><a href="http://code.google.com/p/subsonicproject/downloads/list">Download do SubSonic 2.1</a></li>
</ul>

<p>Sempre que um novo objeto é adicionado ou excluído é necessário recompilar nossa aplicação para ter acesso a ele no código fonte.</p>

<p>Para que você entenda bem seu funcionamento, vamos a prática.</p>

<p>Inicie um novo projeto ASP.NET Web Site.</p>

<p><a href="https://raphaelcardoso.com.br/wp-content/uploads/2009/04/usandosubsonic01-1.jpg"><img src="https://raphaelcardoso.com.br/wp-content/uploads/2009/04/usandosubsonic01-1-300x195.jpg" alt="usandosubsonic01" title="usandosubsonic01" /></a></p>

<p>Adicione a referência ao SubSonic que se encontra no diretório da <em>C:\Program Files\SubSonic\SubSonic 2.1 Final (no meu caso a versão do SubSonic é 2.1 Final)</em>.</p>

<p>Foi criado em nosso projeto do diretório Bin (diretório das Referencias adicionadas ao projeto) com o SubSonic e todas as demais referencias que ele precisa. Veja a imagem abaixo:</p>

<p><a href="https://raphaelcardoso.com.br/wp-content/uploads/2009/04/usandosubsonic02-1.jpg"><img src="https://raphaelcardoso.com.br/wp-content/uploads/2009/04/usandosubsonic02-1-300x279.jpg" alt="usandosubsonic02" title="usandosubsonic02" /></a></p>

<p>Agora criaremos o diretório App_Code e adicionaremos um arquivo com extensão abp no mesmo com o nome de subsonic.abp.</p>

<p><a href="https://raphaelcardoso.com.br/wp-content/uploads/2009/04/usandosubsonic03-1.jpg"><img src="https://raphaelcardoso.com.br/wp-content/uploads/2009/04/usandosubsonic03-1-191x300.jpg" alt="usandosubsonic03" title="usandosubsonic03" /></a> <a href="https://raphaelcardoso.com.br/wp-content/uploads/2009/04/usandosubsonic04-1.jpg"> <img src="https://raphaelcardoso.com.br/wp-content/uploads/2009/04/usandosubsonic04-1-244x300.jpg" alt="usandosubsonic04" title="usandosubsonic04" /> </a> <a href="https://raphaelcardoso.com.br/wp-content/uploads/2009/04/usandosubsonic05-1.jpg"><img src="https://raphaelcardoso.com.br/wp-content/uploads/2009/04/usandosubsonic05-1-300x198.jpg" alt="usandosubsonic05" title="usandosubsonic05" /></a></p>

<p>Esse arquivo será utilizado pelo SubSonic como arquivo temporário para gerar o código DAL no momento da compilação.</p>

<p>Abra o Web.config para realizarmos a configuração necessárias.</p>

<p>Adicionaremos o configSections…</p>

<p>[sourcecode language=’xml’]</p>

<p>[/sourcecode]</p>

<p>… a ConnectionString …</p>

<p>[sourcecode language=’xml’] [/sourcecode]</p>

<p>… adicione também o Provider do SubSonic, no meu caso utilizarei o SubSonic.MySqlDataProvider para utilizar o banco de dados MySql, caso queira utilizar SQL Server use o SubSonic.SqlDataProvider…</p>

<p>[sourcecode language=’xml’] [/sourcecode]</p>

<p>… e por fim o BuildProvider.</p>

<p>[sourcecode language=’xml’] [/sourcecode]</p>

<p>Seu Web.Config deverá ficar parecido com o meu.</p>

<p>[sourcecode language=’xml’] &lt; ?xml version=”1.0”?&gt;</p>

<p>[/sourcecode]</p>

<p>Se quiser, pode configurar um banco de dados que você já tenha criado, acredito que será muito mais interessante e assim poderá fazer um comparativo do tempo de desenvolvimento.</p>

<p>Até aqui não gastamos muito tempo para configurar e isso não será diferente para desenvolver.</p>

<p>Antes de começarmos a codificar, vamos dar um Build em nosso projeto apertando <em>F6</em> para que o SubSonic crie a DAL do nosso projeto e agora sim criaremos nosso SELECT e preencher o GridView com as informações.</p>

<p>Adicione a namespace de referencia ao SubSonic e a nossa DAL no CodeBehind</p>

<p>[sourcecode language=’csharp’] using ArtigoSubSonic; using SubSonic; using System.Data; [/sourcecode]</p>

<p>ArtigoSubSonic é o nome da namespace que definimos no nosso Web.Config</p>

<p>Em nossa página Default.aspx adicione um GridView e vá ao fonte para adicionar um código no Page_Load.</p>

<p>Abaixo temos o código para retornar os dados da tabela <em>Clientes</em></p>

<p>[sourcecode language=’csharp’] // Retorna os Clientes GridView1.DataSource = Cliente.FetchAll(); GridView1.DataBind(); [/sourcecode]</p>

<p>Adicionar…</p>

<p>[sourcecode language=’csharp’] // Adiciona Cliente Cliente cliente = new Cliente(); cliente.Nome = “Marcos”; cliente.Sobrenome = “Prado”; cliente.Cidade = “Belo Horizonte”; cliente.Telefone = “34-4125-4711”; cliente.Save(); [/sourcecode]</p>

<p>Atualizar…</p>

<p>[sourcecode language=’csharp’] // Atualizar Cliente Cliente cliente = new Cliente(4); cliente.Nome = “Marcos”; cliente.Sobrenome = “Prado Silva”; cliente.Cidade = “Belo Horizonte”; cliente.Telefone = “34-4125-4711”; cliente.Save(); [/sourcecode]</p>

<p>Apagar…</p>

<p>[sourcecode language=’csharp’] // Apaga Cliente informando o ID Cliente.Delete(5); [/sourcecode]</p>

<p>Simples? Imagine se tivessemos que criar a conexão com o banco, montar toda a nossa DAL manualmente?</p>

<p>Acesse também o site oficial: http://subsonicproject.com/</p>

<p>Agora basta explorar as funcionalidades e facilidade do SubSonic.</p>

<p>E Apesar de nosso foco ser sempre C# o mesmo pode ser veito em VB.NET</p>

<p>Abraço e sucesso!!!</p>

		
	</div>
</article>


      </main>		
      <!-- Pagination links -->
      
	  </div>
    
    <!-- Footer -->
    <footer class="footer"><span>&copy; 2024 C# Brasil. Todos os direitos reservados | Versão: 1.0.0 </span></footer>
    <!-- Script -->
    <script src="/js/main.js"></script>	

	</div>
</body>
</html>
