<!DOCTYPE html>
<html>

<head>
	<!-- Meta -->
	<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="C# Brasil">

	<title>Verificando DBNull de forma mais “elegante” com extension methods e generics</title>

	<!-- CSS & fonts -->
	<link rel="stylesheet" href="/css/main.css?1716937206294534819">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,600,800" rel="stylesheet" type="text/css">

    <link rel="shortcut icon" href="/images/favicon.png" />
</head>


<body>
	<div id="wrap">
	  	
    <!-- Navigation -->
    <nav id="nav">
	<div id="nav-list">
		<a href="http://localhost:4000/">Página inicial</a>
		<a href="http://localhost:4000/sobre">Sobre o blog</a>
	</div>
</nav>

    
    <!-- Icon menu -->
	  <a id="nav-menu">
	  	<div id="menu"></div>
	  </a>
    <!-- Header -->
    <header id="header">
	<a href="http://localhost:4000/">
		<img src="/images/logo_csharpbrasil.png" class="logo" alt="C# Brasil">
	</a>
</header>

    <!-- Main content -->
	  <div id="container">
      <main>
        <article id="post-page">
	<h2>Verificando DBNull de forma mais “elegante” com extension methods e generics</h2>		
	<time datetime="2012-03-13T14:00:15-03:00" class="by-line">
		
		13
		Março
		  
		2012
	</time>
	<div class="content">

		<p>Em um banco de dados relacional um valor nulo é usado em uma coluna quando o valor é desconhecido ou ausente. Um nulo não é uma string vazia (para tipos de dados string ou datetime), nem um valor zero (para tipos de dados numéricos). (<a href="http://msdn.microsoft.com/en-us/library/ms172138.aspx" title="Handling Null Values (ADO.NET)">MSDN</a>) Em alguns códigos que utilizam DataReader para leitura dos dados eu costumo encontrar verificações se o valor retornado da base de dados não é nulo como o código a seguir: [sourcecode language=”csharp”] … if( myDataReader[“columnName”] != DBNull.Value ) { myObject.Propriety = Convert.ToBoolean( myDataReader [“columnName”] ); } else { //Faça algo } … [/sourcecode] Eu particularmente acho essa forma de verificação um tanto “deselegante”, pois no momento em seja feita a leitura de alguma tabela que possua vários campos que podem retornar nulo a quantidade de “if” será grande e prejudicará a leitura do código e deixará o método extenso. Para contornar isso, uma solução que encontrei foi com a utilização de <a href="http://msdn.microsoft.com/pt-br/library/bb383977.aspx" title="Extension Methods (C# Programming Guide)">extension methods</a> e <a href="http://msdn.microsoft.com/pt-br/library/512aeb7t.aspx" title="Generics (C# Programming Guide)">generics</a>. [sourcecode language=”csharp”] using System; namespace MyNamespace { public static class MyExtensions { public static T DefaultDbNull( this Object value, object defaultValue ) { if( value == Convert.DBNull ) return ( T )defaultValue; return ( T )value; } } } [/sourcecode] Forma de usar: [sourcecode language=”csharp”] … myObject.Propriety = myDataReader[“columnName”].DefaultDbNull( string.Empty ); … [/sourcecode] Desta forma eliminamos uma grande quantidade de “if”, em troca de um único método de extensão que poderá ser reutilizável em todo o aplicativo que utilizar a classe de extensão.</p>

		
	</div>
</article>


      </main>		
      <!-- Pagination links -->
      
	  </div>
    
    <!-- Footer -->
    <footer class="footer"><span>&copy; 2024 C# Brasil. Todos os direitos reservados | Versão: 1.0.0 </span></footer>
    <!-- Script -->
    <script src="/js/main.js"></script>	

	</div>
</body>
</html>
